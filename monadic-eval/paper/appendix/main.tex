\documentclass{article}
\usepackage{microtype}
\usepackage{textcomp}
\usepackage[scaled=0.8]{DejaVuSansMono}
\usepackage{setspace}
\usepackage{stackengine}
\usepackage{wrapfig}
\renewcommand\stacktype{L}
%\linespread{0.95}

\usepackage{balance}
\usepackage{moresize}
\usepackage{csquotes}
\usepackage{upgreek}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{stmaryrd}

\usepackage{mathpartir}
\usepackage{galois}

\usepackage{mdframed}

\definecolor{IdentifierColor}{rgb}{0.15,0.15,0.50}
\newcommand{\ID}[1]{{\color{IdentifierColor}#1}}

\definecolor{PuncColor}{rgb}{0.52,0.24,0.14}
\newcommand{\PN}[1]{{\color{PuncColor}#1}}

\definecolor{KeywordColor}{rgb}{0.52,0.24,0.14}
\newcommand{\KY}[1]{{\color{KeywordColor}#1}}

\definecolor{ValueColor}{rgb}{0.13,0.55,0.13}
\newcommand{\VL}[1]{{\color{ValueColor}#1}}

\definecolor{ResultColor}{rgb}{0.10,0.10,0.79}
\newcommand{\RE}[1]{{\color{ResultColor}#1}}

\definecolor{ErrorColor}{rgb}{0.75,0.10,0.10}
\newcommand{\EO}[1]{{\color{ErrorColor}#1}}


\usepackage{listings}
\lstset%
  {language=Lisp
  ,upquote=true
  ,mathescape=true
  ,basicstyle=\ttfamily\color{PuncColor}
  ,alsoletter=+-*/?'\#0123456789^:
  ,identifierstyle=\color{IdentifierColor}
  ,keywords=
    {define,let,match,if
    ,do,define-monad,for/monad+
    ,\#lang
    ,\#:when
    ,\#:unless
    }
  ,keywordstyle=\color{KeywordColor}
  ,emph=
    {return,bind
    ,zero?
    ,ask-env,local-env
    ,ext,find,alloc
    ,get-store,put-store,update-store
    ,tell
    ,get-dead,put-dead,update-dead
    ,fail,mplus
    ,get-,put-,update-
    ,ask-,local-
    ,get-path-cond,refine
    ,ask-cache-in,local-cache-in
    ,get-cache-out,put-cache-out,update-cache-out
    }
  ,emphstyle=\color{IdentifierColor}\emph
  ,literate=
    {‹λ›}{{{\KY{«\uplambda»}}}}1
    {‹δ›}{{{\ID{«\updelta»}}}}1
    {‹σ›}{{{\ID{«\upsigma»}}}}1
    {‹ς›}{{{\ID{«\varsigma»}}}}1
    {‹ρ›}{{{\ID{«\uprho»}}}}1
    {‹α›}{{{\ID{«\upalpha»}}}}1
    {‹ψ›}{{{\ID{«\uppsi»}}}}1
    {‹φ›}{{{\ID{«\upphi»}}}}1
    {‹θ›}{{{\ID{«\uptheta»}}}}1
    {‹Σ›}{{{\ssmall\ID{«Σ»}}}}1
    {‹∅›}{{{\ID{«∅»}}}}1
    {‹←›}{{{\scriptsize«←»}}}1
    {‹≔›}{{{\scriptsize«≔»}}}1
    {‹₀›}{{{\ID{«\,⸤⦑0⦒⸥»}}}}1
    {‹₁›}{{{\ID{«\,⸤⦑1⦒⸥»}}}}1
    {‹₂›}{{{\ID{«\,⸤⦑2⦒⸥»}}}}1
    {‹′›}{{{\ID{«\,′»}}}}1
    {‹¢›}{{{\ID{\$}}}}1
    {‹∈›}{{{\ID{«∈»}}}}1
    {‹×›}{{{\ssmall\ID{«×»}}}}1
    {‹⊥›}{{{\ssmall\ID{«⊥»}}}}1
    {‹¬›}{{{\ssmall\ID{«¬»}}}}1
    {‹ᴵ›}{{{\ID{\,«⸢⦑I⦒⸣»}}}}1
    {‹ᴼ›}{{{\ID{\,«⸢⦑O⦒⸣»}}}}1
    {‹⁺›}{{{\ID{\,«⸢⦑+⦒⸣»}}}}1
    {‹⸢›in‹⸣›}{{{\ID{«⸢⦑in⦒⸣»}}}}1
    {‹⸢›out‹⸣›}{{{\ID{«⸢⦑out⦒⸣»}}}}2
    {`}{{{\`{}}}}1
    {get-‹¢›}{{{\ID{\emph{get-\$}}}}}5
    {put-‹¢›}{{{\ID{\emph{put-\$}}}}}5
    {update-‹¢›}{{{\ID{\emph{update-\$}}}}}8
    {=}{{{\ID{=}}}}1
  ,classoffset=1
  ,keywords=
    {'add1,'sub1,'+,'-,'*,'/,'failure,'N
    ,\#t,\#f,0,1,2,3,4,5,6,7,8,9
    }
  ,keywordstyle=\color{ValueColor}
  }
\lstdefinestyle{result}
  {basicstyle=\ttfamily\color{ResultColor}
  ,keywordstyle=\color{ResultColor}
  ,identifierstyle=\color{ResultColor}
  ,literate=
    {‹λ›}{{{«\uplambda»}}}1
    {‹δ›}{{{«\updelta»}}}1
    {‹σ›}{{{«\upsigma»}}}1
    {‹ς›}{{{«\varsigma»}}}1
    {‹ρ›}{{{«\uprho»}}}1
    {‹φ›}{{{«\upphi»}}}1
    {‹θ›}{{{«\uptheta»}}}1
    {‹Σ›}{{{\ssmall«Σ»}}}1
    {‹∅›}{{{«∅»}}}1
    {‹←›}{{{«←»}}}1
    {‹≔›}{{{«≔»}}}1
    {‹₀›}{{{«\,⸤⦑0⦒⸥»}}}1
    {‹₁›}{{{«\,⸤⦑1⦒⸥»}}}1
    {‹₂›}{{{«\,⸤⦑2⦒⸥»}}}1
    {‹′›}{{{«\,′»}}}1
    {‹¢›}{{{\$}}}1
    {‹∈›}{{{«∈»}}}1
    {‹×›}{{{\ssmall«×»}}}1
    {‹⊥›}{{{\ssmall«⊥»}}}1
    {‹¬›}{{{\ssmall«¬»}}}1
    {timeout}{{{\EO{\emph{\textbf{timeout}}}}}}7
  }

\newcommand{\rfloat}[1]{\begin{flushright}\fbox{#1}\end{flushright}\vspace{-2.1em}} % -2.1em}}
\newcommand{\resultskip}{\vspace{-0.8em}} % -1.2em}}
\newcommand{\figskip}{\vspace{0pt}} % -1.3em}}
%\newcommand{\captionskip}[1]{\vspace{-0.75em}\caption{#1}\vspace{-1em}}
\newcommand\captionskip[1]{\caption{#1}}
\newcommand{\up}[1]{\overbrace{\vphantom{X^X}#1}}
\newcommand{\down}[1]{\underbrace{\vphantom{X^X}#1}}
\newcommand{\mathgobble}{-0.25em}
\newcommand{\monadgobble}{-0.5em}

\newcommand\lamif{$\lambda$IF}
\newtheorem{theorem}{Theorem}



\title{Appendix}

\begin{document}
\maketitle

\appendix
\input{10-formalism.tex}

\end{document}
